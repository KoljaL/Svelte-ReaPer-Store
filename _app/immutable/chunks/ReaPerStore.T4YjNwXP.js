var p=Object.defineProperty;var c=i=>{throw TypeError(i)};var g=(i,t,e)=>t in i?p(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var u=(i,t,e)=>g(i,typeof t!="symbol"?t+"":t,e),h=(i,t,e)=>t.has(i)||c("Cannot "+e);var r=(i,t,e)=>(h(i,t,"read from private field"),e?e.call(i):t.get(i)),f=(i,t,e)=>t.has(i)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),d=(i,t,e,o)=>(h(i,t,"write to private field"),o?o.call(i,e):t.set(i,e),e);import{w as S}from"./index.nQDJ5vOH.js";var a,s;const n=class n{constructor(t,e){f(this,a);f(this,s);d(this,a,n.prefix+t);const o=typeof window<"u"?window.localStorage.getItem(r(this,a)):null;d(this,s,S(o?JSON.parse(o):e)),r(this,s).subscribe(w=>{typeof window<"u"&&window.localStorage.setItem(r(this,a),JSON.stringify(w))}),typeof window<"u"&&window.addEventListener("storage",w=>{w.key===r(this,a)&&w.newValue&&r(this,s).set(JSON.parse(w.newValue))})}static setPrefix(t){n.prefix=t}subscribe(t){return r(this,s).subscribe(t)}set(t){r(this,s).set(t)}update(t){r(this,s).update(t)}static getEntriesWithPrefix(){if(typeof window>"u")return{};const t={};for(let e=0;e<window.localStorage.length;e++){const o=window.localStorage.key(e);o!=null&&o.startsWith(n.prefix)&&(t[o]=window.localStorage.getItem(o)||"")}return t}static clearWithPrefix(){if(typeof window>"u")return;const t=[];for(let e=0;e<window.localStorage.length;e++){const o=window.localStorage.key(e);o!=null&&o.startsWith(n.prefix)&&t.push(o)}t.forEach(e=>window.localStorage.removeItem(e))}};a=new WeakMap,s=new WeakMap,u(n,"prefix","");let l=n;function m(i,t){return new l(i,t)}export{l as R,m as r};
