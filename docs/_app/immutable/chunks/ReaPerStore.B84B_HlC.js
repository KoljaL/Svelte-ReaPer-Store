var S=Object.defineProperty;var p=o=>{throw TypeError(o)};var m=(o,e,t)=>e in o?S(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var g=(o,e,t)=>m(o,typeof e!="symbol"?e+"":e,t),u=(o,e,t)=>e.has(o)||p("Cannot "+t);var s=(o,e,t)=>(u(o,e,"read from private field"),t?t.call(o):e.get(o)),w=(o,e,t)=>e.has(o)?p("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),d=(o,e,t,r)=>(u(o,e,"write to private field"),r?r.call(o,t):e.set(o,t),t);import{w as x}from"./index.VWjRckcE.js";var c,n;const a=class a{constructor(e,t){w(this,c);w(this,n);d(this,c,a.prefix+e);const r=typeof window<"u"?window.localStorage.getItem(s(this,c)):null;d(this,n,x(r?JSON.parse(r):t)),s(this,n).subscribe(i=>{typeof window<"u"&&window.localStorage.setItem(s(this,c),JSON.stringify(i))}),typeof window<"u"&&window.addEventListener("storage",i=>{console.log("Storage event:",i),console.log("Storage event:",i.key,i.newValue),i.key===s(this,c)&&i.newValue&&s(this,n).set(JSON.parse(i.newValue))})}static setPrefix(e){a.prefix=e}subscribe(e){return s(this,n).subscribe(e)}set(e){s(this,n).set(e)}update(e){s(this,n).update(e)}static getEntriesWithPrefix(){if(typeof window>"u")return{};const e={};for(let t=0;t<window.localStorage.length;t++){const r=window.localStorage.key(t);r!=null&&r.startsWith(a.prefix)&&(e[r]=window.localStorage.getItem(r)||"")}return e}static clearWithPrefix(){if(typeof window>"u")return;const e=[];for(let t=0;t<window.localStorage.length;t++){const r=window.localStorage.key(t);r!=null&&r.startsWith(a.prefix)&&e.push(r)}e.forEach(t=>window.localStorage.removeItem(t))}static exportWithPrefix(){const e=a.getEntriesWithPrefix(),t=new Blob([JSON.stringify(e)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download="reaperstore-export.json",i.click(),URL.revokeObjectURL(r)}static importFromFile(e){const t=new FileReader;t.onload=r=>{const i=JSON.parse(r.target.result);try{Object.entries(i).forEach(([l,h])=>{window.localStorage.setItem(l,h)}),window.dispatchEvent(new Event("storage")),console.log("Data imported successfully.",window.localStorage)}catch(l){console.log("Error importing data:",l)}},t.readAsText(e)}};c=new WeakMap,n=new WeakMap,g(a,"prefix","");let f=a;function E(o,e){return new f(o,e)}export{f as R,E as r};
